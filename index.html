<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Petrov Dima</title>

    <link href="/src/tailwind-root.css" rel="stylesheet" />
    <link href="/src/my.scss" rel="stylesheet" />
  </head>

  <body
    class="m-auto flex flex-col gap-y-16 text-[40px] leading-[1.5em] lg:max-w-[856px]"
  >
    <div class="mt-[100px]"></div>

    <div class="relative flex justify-center">
      <div
        class="relative max-w-[508px] flex-[1_1_100%] overflow-hidden pb-[60vh] opacity-100 delay-500 duration-500 lg:max-w-[856px]"
      >
        <h2 class="absolute top-10 lg:top-20">
          <img src="/images/avatars/dima.svg" />
        </h2>

        <div
          id="container-to-text"
          class="flex flex-col gap-y-16 text-[40px] leading-[1.5em]"
        >
          <div class="mt-[300px] text-gray-950">
            <span data-animated-characters>
              I'm build world-class technology systems for software company.
            </span>

            <span data-animated-logo-cards>
              <img class="logo-mini-card" src="/images/logos/ya.png" alt="ya" />
              <img class="logo-mini-card" src="/images/logos/ff.png" alt="ff" />
              <img class="logo-mini-card" src="/images/logos/pt.png" alt="pt" />
              <img
                class="logo-mini-card"
                src="/images/logos/gpb.png"
                alt="pt"
              />
              <img
                class="logo-mini-card"
                src="/images/logos/solar.png"
                alt="pt"
              />
            </span>

            <span data-animated-characters> We are a tight-knit team </span>

            <span data-animated-avatars-container>
              <span data-animated-avatars class="avatar">
                <img src="/images/logos/ya.png" alt="ya" />
              </span>

              <span data-animated-avatars class="avatar">
                <img src="/images/logos/ff.png" alt="ff" />
              </span>

              <span data-animated-avatars class="avatar">
                <img src="/images/logos/pt.png" alt="pt" />
              </span>
            </span>

            <span data-animated-characters>
              with 12 years of experience helping founders showcase how good
              their products really are.
            </span>
          </div>

          <div class="text-gray-950">
            <span data-animated-characters>
              Pulling everything together comes at the expense of your product.
              Your team should never stop shipping. That's where we step in.
            </span>
          </div>

          <div class="text-gray-950">
            <span data-animated-characters>
              We design and build the perfect site for your product. We move
              fast, while ensuring the highest level of craft, attention to
              detail and performance.
            </span>
          </div>

          <div class="text-gray-950">
            <span data-animated-characters>
              Projects start at $3,000/wk and they run for at least 8 weeks.
            </span>
          </div>

          <div class="text-gray-950">
            <span data-animated-characters>
              Your product deserves a better site. Book a call
            </span>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { initSmoothScroll } from './src/scroll.js';

      initSmoothScroll();

      import { gsap } from 'gsap';
      import SplitType from 'split-type';

      /** @typedef ScrollTriggerConfig
       * @property {ScrollTrigger.Vars} scrollTrigger
       * */

      /**
       * @param {HTMLElement | string} trigger
       * @param {ScrollTrigger.Vars} options
       * @returns ScrollTriggerConfig
       * */
      function scrollTrigger(trigger, options) {
        return {
          scrollTrigger: {
            scrub: true, // привязка к позиции скрола, а не ко времени
            trigger: trigger,
            ...options,
          },
        };
      }

      const animatedCharacters = document.querySelectorAll(
        '[data-animated-characters]'
      );
      animatedCharacters.forEach((spanElement) => {
        const split = new SplitType(spanElement, { types: 'chars' });

        gsap.from(split.chars, {
          opacity: 0.2, // gsap.from, поэтому начиная с этой прозрачности и до 1
          stagger: 0.1, // задержка между элементами - каждый следующий через 0.1 секунды
          color: 'var(--color-gray-950)',
          ...scrollTrigger(split.chars, {
            start: 'top 60%', // анимация запускается, когда группа символов достигает x% скрола сверху экрана
            end: 'top 40%', // анимация завершается, когда группа символов достигает y% скрола сверху экрана
          }),
        });
      });

      const animatedAvatarContainers = document.querySelectorAll(
        '[data-animated-avatars-container]'
      );
      animatedAvatarContainers.forEach((avatarElement) => {
        gsap.from(avatarElement, {
          width: 0,
          display: 'inline-flex',
          ...scrollTrigger(avatarElement, {
            start: 'top 60%', // анимация запускается, когда группа символов достигает x% скрола сверху экрана
            end: 'top 60%', // анимация завершается, когда группа символов достигает y% скрола сверху экрана
          }),
        });
      });

      gsap.from('[data-animated-avatars-container] [data-animated-avatars]', {
        scale: 0,
        duration: 1,
        transformOrigin: '0px 50%',
        stagger: 1, // задержка между элементами - каждый следующий через 1 секунды
        ...scrollTrigger('[data-animated-avatars-container]', {
          start: 'top 60%', // анимация запускается, когда группа символов достигает x% скрола сверху экрана
          end: 'top 55%', // анимация завершается, когда группа символов достигает y% скрола сверху экрана
        }),
      });
    </script>
  </body>
</html>
